<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout.html}"
      data-bs-theme="dark"
      lang="en">
<head>
    <title>Content page</title>
</head>
<body>
<section layout:fragment="content">
    <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
        <div class="container">
            <div class="row">
                <div class="col-lg-10 mt-5 mb-5">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center"
                             style="font-weight: bold;">
                            <!--<span th:text="${position.name}">Apple Inc.</span>
                            <span>€15,000</span>-->

                            <!-- TradingView Widget BEGIN -->
                            <div class="tradingview-widget-container">
                                <div class="tradingview-widget-container__widget"></div>
                                <div class="tradingview-widget-copyright"><a href="https://www.tradingview.com/" rel="noopener nofollow" target="_blank"><span class="blue-text">Track all markets on TradingView</span></a></div>
                                <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js" async>
                                    {
                                        "symbols": [
                                        [
                                            "Apple",
                                            "AAPL|1D"
                                        ]
                                    ],
                                        "chartOnly": false,
                                        "width": 550,
                                        "height": 400,
                                        "locale": "en",
                                        "colorTheme": "dark",
                                        "autosize": false,
                                        "showVolume": false,
                                        "showMA": false,
                                        "hideDateRanges": false,
                                        "hideMarketStatus": false,
                                        "hideSymbolLogo": false,
                                        "scalePosition": "right",
                                        "scaleMode": "Normal",
                                        "fontFamily": "-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif",
                                        "fontSize": "10",
                                        "noTimeScale": false,
                                        "valuesTracking": "1",
                                        "changeMode": "price-and-percent",
                                        "chartType": "area",
                                        "maLineColor": "#2962FF",
                                        "maLineWidth": 1,
                                        "maLength": 9,
                                        "lineWidth": 2,
                                        "lineType": 0,
                                        "dateRanges": [
                                        "1d|1",
                                        "1m|30",
                                        "3m|60",
                                        "12m|1D",
                                        "60m|1W",
                                        "all|1M"
                                    ]
                                    }
                                </script>
                            </div>
                            <!-- TradingView Widget END -->

                            <!---->
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-6">
                                    <p th:text="'Stückzahl: ' + ${position.getQuantity()}">Stückzahl: 100</p>
                                    <p th:text="'Wkn: ' + ${position.getWkn()}">WKN: 865985</p>
                                    <p>Börse: NASDAQ</p>
                                </div>
                                <div class="col-6 text-end">
                                    <p style="color: green;">Gewinn: +5%</p>
                                    <p>
                                        <stock-price th:id="${position.getWkn()}"></stock-price>
                                    </p>
                                    <p th:text="'Kaufkurs: ' + ${position.getStrikeprice()}">Kaufkurs: €142</p>
                                </div>
                            </div>

                            <!-- Tranches START -->

                            <ul class="list-unstyled">
                                <li th:each="tranche : ${position.getTranches()}">
                                    <div class="card">
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col-6">
                                                    <p th:text="'Strike Date: ' + ${tranche.strikeDate}">Strike Date:
                                                        01.01.2020</p>
                                                    <p th:text="'Quantity: ' + ${tranche.quantity}">Quantity: 123</p>
                                                    <p th:text="'Strike Price: ' + ${tranche.strikeprice}">Strike Price:
                                                        €142</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                            </ul>

                            <!-- Tranches ENDE -->


                            <div class="row">
                                <div class="col align-self-end">
                                    <a th:href="@{'/positions/open/' + ${position.getId()}}"
                                       class="btn btn-primary">Open new Position</a>
                                    <div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script>
        </script>
    </main>

</section>

<script src="/js/stock-price.js"></script>
</body>
</html>